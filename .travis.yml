language: node_js
node_js: node
services:
  - docker
before_install:
  - sudo rm /usr/local/bin/docker-compose
  - curl -L https://github.com/docker/compose/releases/download/1.21.2/docker-compose-`uname -s`-`uname -m` > docker-compose
  - chmod +x docker-compose
  - sudo mv docker-compose /usr/local/bin
deploy:
- provider: script
  skip_cleanup: true
  script: rm .env && ./node_modules/.bin/db-migrate up
  on:
    branch: master
- provider: lambda
  region: eu-west-2
  function_name: not-safe-not-fair
  zip: deploy
  handler_name: handler
  runtime: nodejs6.10
  role: arn:aws:iam::268897920616:role/lambda_basic_execution
  on:
    branch: master
  access_key_id: AKIAI2EARVBQAKFPV7KQ
  secret_access_key:
    secure: G+Z0EB1sNFGiVHco1R/FIfV1jpF8iqEi3G1YUZBtwxPlDKFexHtC5ievr/8n8kIvr+aPFm0+Z8Qu5G2pZUYPGopCTX7P2slPAglLeRJSUJg2DWCRoY12WOSLeBX9QRSdxHV6hvTxDtiDdpIXk5h5VRHWXH+kVmfZpxAn0brL4k0DQqA1ugIpLW2Bio6mmKUczuOSQjFUzdZ/uH67D564Ilq0mAQIp5TnSYcTqkw5pgMRsdF9TAFId7yu/KCwZdhgkpXW+AgAf/J9i03XTvAyOc9JA+LN0tXGB0q2LEaYCryvDmIWbU9VDF7bkNuEG5wQpa/JlNDU5YN75h9qm24T2D5gbd8p8XCasqPLEbjuCEfKhLUMoFEC44rHKfVv1p8HAm7OERvkBiIQ73RHYvGeKw84SR4c5Fc/XcuyJgVf7YyKXFfxmoy20t5VR28JOT5CASv8RIfep0K3d2jgUOjWwIFPrpwwVtIKztu+2HwvOzdZxsjD4+s0/GRmGk+I3vVJWhIMcsoyzzLVIIiyvuRf2WZAynyVD9RMIY2hJ9YjEzsi1XhLwzDKl30EkKtfkcSaObkHE21NPoBmcWKGiieV188PUpeJt7elftd3rvNvkXfBVSgwGY8EqT/P+Q/bBTxqVXoEPzKVhMUlbZhyHQpK78/DT+qmR7mjzxBQKJNv/XI=
env:
  global:
  - secure: KTCVZp41yrNy4ZIKHt0x5583QVAYnv16SD3+AHC+rl98CzbqIFLiwHco1pwYFPItJMnU+tXGotQ75S/bbsn660fx1uh2ak9QBIrBWydOFXxhFk2zMOT8CEoq8487CAGMypbrKmYryNZEF/g9WuF+1SMK9h3kRdQCrjnG3C6EkVjgajEUrgk0fTtIdX5d83IMoSkHW5d36jsMH/qbRN/4zysJXWrGyTIHBSBpnFekTjyZj2kCCtvua7vNL2GKqnKBBgwDpXDJqBiyTWybavLiWMyuszdVaj3l/OEIfjJQfs2CXdJXNXss/LenhzFUKLwnc6Lq5QzI8Y6o9/XnAB1q/YnB6zxrrQE1AWKfMOOz2wO3PAgqyrCMIo1QPWPjtKyx3BZv9onXOL5ZjlkQjo4SpBYUaJ0DQgnidcEHSSMLOPgGG+LKZeMJxHHOIIhzVzWZeyQDgSBUZV6VyrBrpIPu43n8v4VK64QiXt7MYodLpfX7ByzovBgFn/vdA8Pzxr51x9N10kxeOEmpeCp2djYwIL2SBNPAUOAYE8NG9McA/csGa9D8owATDwmcrU1FUkJE8Ifh9QGGL+XFXPbHTBEst9sP/LfwAU0EODW4zsBHxGTxVF0ZvYXSFGs/uVhwwFhnqfPB2/dDz3KVSiJjzJ2K3uIUVnXOBC/XBtjFq5Dv4Gw=
  - secure: XgL3D5QkQwhnOeAa2h4qYA5zOKkURcfqBnfuCDiLA66n83wnrY2ZDtrgxqYPbA3DUP6YA6rHna0+hyYMCoECTnLwhYrr5Jkm9RzP5OnVVYkUbzSkWPWdqnaSGd5C8C+jzEWOswpjAOcZ0m7owG7ooxH6xvdRV9zAgMDoemXlfR0OrgTyIn7zf4pHixzCJJHeP9cg4khgzJYXSep3bibMqx+itHnt38/b9zlLnf2DBJbMEudpSgVJzk08RnTD8KIIK5e7fb4HjWGCqeFqf6e9K23TMMbUreMiE2cAcd9BJN3Iy0MIjhn2nXl34sF/8Iv6lhJadevWrP+XDiABb4kLkXlqZyIWjFrtv9q3Ob+i0rrvFW/mFAGM+i+rj7OQn9STrXIeuwFu2oEtUfhlqsvr7yrvUQ+ZihAcWjX7JSwCfq7GdyfGsTtbHrvOUEMfLMhZx7pn3wUjj9QYGmJzSJ7ouGeyej2YOQ9MEveMEaNMBCC5aEKb8hB5kHx0d1gME+l33NqoYPD7Xp2mCAZcMzY1/ID0VEaLWxDedfa7jS7XX9ydjX0RfEtx3p/YrqtFUqFU4rlNMOdNSTfov9ws84kqMQuNYK3foCXJNg5Pq7IbRpUNgyfEqPI6bzfzVW76qYTY243B08h3CzcYhADh28flPm7C08fuN/Rn5PgB9jTb/FU=
  - secure: jWbQ4xsWW5wXXZXxZ2udwQ/7zdCAxXoC5V195J9cA2FFqvQ0Aav8yCx/Yh0wHtZsW75hpf2GMpvEcHt0Nf804COnthWK75YSBBo/WTegXWQNRgs6guy4LzzoMPs8ProwCGHvPFORD7afo2CSF3UcKCvPCGEQmMZgg6d9x7101wt0KY3Sa3SXkdhmUPdoEIHIl+zzJH50xeAZxQpwUKGP0tANa28UrzdLgt2Zhc6PznlZqacBhfnrEFctHi4GTz9wCKZ5rjTNFokG/juo3ixCwyj+TTHkG7wXnR78kjvbMzBm0moEcJKpRWQEoYImFlrh09X6cHIo1ZA2pQxMXgQ/kgunX2d7FLqlnx3W1YZ253P8ILQDyeCxMmCFvBQZq2SHYZYf8/CR0d1Hj32Fam1/4Ky/yhhB2YKhKLENKtwnTFL5e8diTjxT5ACwzLYBxaH45Z7aONF6HAQHhTLwOk9nrmiGDnyRtyP7Wv8R4otquRr6X0J2C4z7P278A39m0Hny7emS9jXm3839Iza2O8HlgYRDN+iLBaD9HAYt5IPrMH9bvIIEsxujmYDgJRJ6qWMl4M2xz0kHFL+qz7UtlrzAyaExHlYQwdgCflnupxNLcpmfuwilZkZJZN4Xtvzl2bQeKEE1QTrtuaIE1zLZuZ8VRzzoeFvxdJDfMfk6sN1NYoA=
  - secure: rPUZOVMoaxpvDD/k49EmoDdq13Q8IeV2J7m824JLJkpm7YZN1dvI1BcY8/fhLAXL7CfhQPJuoGyYtlthrpkcC6b6cdj+pWHGG3sZHBI+4CWORVc/YE8B4IYOJRSc/DVzjCbv9a52z+gtltw/6JHeK6MwLjECGLREC4F7hYpH1vDSjSlSV1auld7q33FI17bJeefUORAHuLTIRqJCzNEnKjmJZkjIcvOHynCbrPyIFj4Pt9X894P+Evuw2diKogC1fL/tYrki60pLCi+VjiQ/AG7B1ICTbPCTvPp6JnKGutjTnoZFq+W6TY7vRF7HzghMtfpa+Z8E4K7VXD8ZOarSh6MDPAp8qV0mww4nSLaqOqf4uG/FyWspgRK7xg81oQ2ODkwLPCVNJQtAnMDbomtc8lw96qYNgC0IQ9rtXknrR/RCQa/Lijw/AG2DRX23dW3rIkgFXiXmRYVyhkU8fjWPB1lkG4scp3qMSzhoufbUj5z7xwSWZNYuLmsg8Soidl7tkHCrzqQfoL5qq7Yevi7JGUbraa8UGEKpxodJwYYMek67Cw5yIm7aiyfqNIl3PfqSBWepiOYQJSYEoX6mmliyjGhGxCv8I/q0pvEQqGNBBOt1svpxscNOibYykDWVy3/3ZipftUYBu7lkLvWHnFuDdMEDk9H+IrG+kOTSIjNcMM4=
